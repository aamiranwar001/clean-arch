2024-02-21 14:43:48.506 +05:00 [INF] Registered 13 endpoints in 267 milliseconds.
2024-02-21 14:43:48.994 +05:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA journal_mode = 'wal';
2024-02-21 14:43:49.053 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Contributors" (
    "Id" INTEGER NOT NULL CONSTRAINT "PK_Contributors" PRIMARY KEY AUTOINCREMENT,
    "Name" TEXT NOT NULL,
    "Status" INTEGER NOT NULL
);
2024-02-21 14:43:49.054 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Projects" (
    "Id" INTEGER NOT NULL CONSTRAINT "PK_Projects" PRIMARY KEY AUTOINCREMENT,
    "Name" TEXT NOT NULL,
    "Priority" INTEGER NOT NULL
);
2024-02-21 14:43:49.055 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "ToDoItems" (
    "Id" INTEGER NOT NULL CONSTRAINT "PK_ToDoItems" PRIMARY KEY AUTOINCREMENT,
    "Title" TEXT NOT NULL,
    "Description" TEXT NOT NULL,
    "ContributorId" INTEGER NULL,
    "IsDone" INTEGER NOT NULL,
    "ProjectId" INTEGER NULL,
    CONSTRAINT "FK_ToDoItems_Projects_ProjectId" FOREIGN KEY ("ProjectId") REFERENCES "Projects" ("Id")
);
2024-02-21 14:43:49.057 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_ToDoItems_ProjectId" ON "ToDoItems" ("ProjectId");
2024-02-21 14:43:49.156 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Contributors" AS "c")
2024-02-21 14:43:49.184 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."Name", "p"."Priority"
FROM "Projects" AS "p"
2024-02-21 14:43:49.189 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."ContributorId", "t"."Description", "t"."IsDone", "t"."ProjectId", "t"."Title"
FROM "ToDoItems" AS "t"
2024-02-21 14:43:49.194 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Name", "c"."Status"
FROM "Contributors" AS "c"
2024-02-21 14:43:49.272 +05:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 5), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Contributors" ("Name", "Status")
VALUES (@p0, @p1)
RETURNING "Id";
2024-02-21 14:43:49.282 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Contributors" ("Name", "Status")
VALUES (@p0, @p1)
RETURNING "Id";
2024-02-21 14:43:49.320 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 12), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Projects" ("Name", "Priority")
VALUES (@p0, @p1)
RETURNING "Id";
2024-02-21 14:43:49.326 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (Size = 31), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (Size = 18)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ToDoItems" ("ContributorId", "Description", "IsDone", "ProjectId", "Title")
VALUES (@p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2024-02-21 14:43:49.329 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 81), @p2='?' (DbType = Boolean), @p3='?' (DbType = Int32), @p4='?' (Size = 15)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ToDoItems" ("ContributorId", "Description", "IsDone", "ProjectId", "Title")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "Id";
2024-02-21 14:43:49.331 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 59), @p2='?' (DbType = Boolean), @p3='?' (DbType = Int32), @p4='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ToDoItems" ("ContributorId", "Description", "IsDone", "ProjectId", "Title")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "Id";
2024-02-21 14:43:49.374 +05:00 [INF] Now listening on: http://localhost:57679
2024-02-21 14:43:49.375 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2024-02-21 14:43:49.376 +05:00 [INF] Hosting environment: Development
2024-02-21 14:43:49.377 +05:00 [INF] Content root path: D:\clean-arch\Contour.CleanArchitecture\src\Contour.CleanArchitecture.Web
2024-02-21 14:45:15.521 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:57679/Contributors - null null
2024-02-21 14:45:15.568 +05:00 [WRN] Failed to determine the https port for redirect.
2024-02-21 14:45:15.571 +05:00 [INF] Executing endpoint 'HTTP: GET /Contributors'
2024-02-21 14:45:15.596 +05:00 [INF] Handling ListContributorsQuery
2024-02-21 14:45:15.598 +05:00 [INF] Property Skip : null
2024-02-21 14:45:15.599 +05:00 [INF] Property Take : null
2024-02-21 14:45:15.601 +05:00 [INF] Handled ListContributorsQuery with Ardalis.Result.Result`1[System.Collections.Generic.IEnumerable`1[Contour.CleanArchitecture.UseCases.Contributors.ContributorDTO]] in 1 ms
2024-02-21 14:45:15.629 +05:00 [INF] Executed endpoint 'HTTP: GET /Contributors'
2024-02-21 14:45:15.634 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:57679/Contributors - 200 null application/json 113.5808ms
2024-02-21 14:45:26.867 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:57679/Contributors/1 - null null
2024-02-21 14:45:26.874 +05:00 [INF] Executing endpoint 'HTTP: GET /Contributors/{ContributorId:int}'
2024-02-21 14:45:26.916 +05:00 [INF] Handling GetContributorQuery
2024-02-21 14:45:26.919 +05:00 [INF] Property ContributorId : 1
2024-02-21 14:45:27.013 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__contributorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Name", "c"."Status"
FROM "Contributors" AS "c"
WHERE "c"."Id" = @__contributorId_0
LIMIT 1
2024-02-21 14:45:27.021 +05:00 [INF] Handled GetContributorQuery with Ardalis.Result.Result`1[Contour.CleanArchitecture.UseCases.Contributors.ContributorDTO] in 101 ms
2024-02-21 14:45:27.024 +05:00 [INF] Executed endpoint 'HTTP: GET /Contributors/{ContributorId:int}'
2024-02-21 14:45:27.027 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:57679/Contributors/1 - 200 null application/json 160.5367ms
2024-02-21 14:45:34.701 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:57679/Contributors - null null
2024-02-21 14:45:34.705 +05:00 [INF] Executing endpoint 'HTTP: GET /Contributors'
2024-02-21 14:45:34.709 +05:00 [INF] Handling ListContributorsQuery
2024-02-21 14:45:34.710 +05:00 [INF] Property Skip : null
2024-02-21 14:45:34.712 +05:00 [INF] Property Take : null
2024-02-21 14:45:34.714 +05:00 [INF] Handled ListContributorsQuery with Ardalis.Result.Result`1[System.Collections.Generic.IEnumerable`1[Contour.CleanArchitecture.UseCases.Contributors.ContributorDTO]] in 0 ms
2024-02-21 14:45:34.716 +05:00 [INF] Executed endpoint 'HTTP: GET /Contributors'
2024-02-21 14:45:34.717 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:57679/Contributors - 200 null application/json 16.1486ms
2024-02-21 14:45:37.541 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:57679/Contributors/1 - null null
2024-02-21 14:45:37.544 +05:00 [INF] Executing endpoint 'HTTP: GET /Contributors/{ContributorId:int}'
2024-02-21 14:45:37.547 +05:00 [INF] Handling GetContributorQuery
2024-02-21 14:45:37.548 +05:00 [INF] Property ContributorId : 1
2024-02-21 14:45:37.554 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__contributorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Name", "c"."Status"
FROM "Contributors" AS "c"
WHERE "c"."Id" = @__contributorId_0
LIMIT 1
2024-02-21 14:45:37.557 +05:00 [INF] Handled GetContributorQuery with Ardalis.Result.Result`1[Contour.CleanArchitecture.UseCases.Contributors.ContributorDTO] in 7 ms
2024-02-21 14:45:37.559 +05:00 [INF] Executed endpoint 'HTTP: GET /Contributors/{ContributorId:int}'
2024-02-21 14:45:37.560 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:57679/Contributors/1 - 200 null application/json 19.635ms
2024-02-21 14:45:48.082 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:57679/Projects - null null
2024-02-21 14:45:48.084 +05:00 [INF] Executing endpoint 'HTTP: GET /Projects'
2024-02-21 14:45:48.087 +05:00 [INF] Handling ListProjectsShallowQuery
2024-02-21 14:45:48.089 +05:00 [INF] Property Skip : null
2024-02-21 14:45:48.090 +05:00 [INF] Property Take : null
2024-02-21 14:45:48.092 +05:00 [INF] Handled ListProjectsShallowQuery with Ardalis.Result.Result`1[System.Collections.Generic.IEnumerable`1[Contour.CleanArchitecture.UseCases.Projects.ProjectDTO]] in 1 ms
2024-02-21 14:45:48.097 +05:00 [INF] Executed endpoint 'HTTP: GET /Projects'
2024-02-21 14:45:48.098 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:57679/Projects - 200 null application/json 16.3751ms
2024-02-21 14:45:51.874 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:57679/Projects/1 - null null
2024-02-21 14:45:51.878 +05:00 [INF] Executing endpoint 'HTTP: GET /Projects/{ProjectId:int}'
2024-02-21 14:45:51.884 +05:00 [INF] Handling GetProjectWithAllItemsQuery
2024-02-21 14:45:51.885 +05:00 [INF] Property ProjectId : 1
2024-02-21 14:45:51.939 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__projectId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Name", "t"."Priority", "t0"."Id", "t0"."ContributorId", "t0"."Description", "t0"."IsDone", "t0"."ProjectId", "t0"."Title"
FROM (
    SELECT "p"."Id", "p"."Name", "p"."Priority"
    FROM "Projects" AS "p"
    WHERE "p"."Id" = @__projectId_0
    LIMIT 1
) AS "t"
LEFT JOIN "ToDoItems" AS "t0" ON "t"."Id" = "t0"."ProjectId"
ORDER BY "t"."Id"
2024-02-21 14:45:51.949 +05:00 [INF] Handled GetProjectWithAllItemsQuery with Ardalis.Result.Result`1[Contour.CleanArchitecture.UseCases.Projects.ProjectWithAllItemsDTO] in 63 ms
2024-02-21 14:45:51.960 +05:00 [INF] Executed endpoint 'HTTP: GET /Projects/{ProjectId:int}'
2024-02-21 14:45:51.962 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:57679/Projects/1 - 200 null application/json 88.2161ms
2024-02-21 14:46:13.730 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:57679/Projects/1/ToDoItems/2 - application/json 4
2024-02-21 14:46:13.735 +05:00 [INF] Executing endpoint 'HTTP: POST /Projects/{ProjectId:int}/ToDoItems/{ToDoItemId:int}'
2024-02-21 14:46:13.752 +05:00 [INF] Handling MarkToDoItemCompleteCommand
2024-02-21 14:46:13.754 +05:00 [INF] Property ProjectId : 1
2024-02-21 14:46:13.755 +05:00 [INF] Property ToDoItemId : 2
2024-02-21 14:46:13.758 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__projectId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Name", "t"."Priority", "t0"."Id", "t0"."ContributorId", "t0"."Description", "t0"."IsDone", "t0"."ProjectId", "t0"."Title"
FROM (
    SELECT "p"."Id", "p"."Name", "p"."Priority"
    FROM "Projects" AS "p"
    WHERE "p"."Id" = @__projectId_0
    LIMIT 1
) AS "t"
LEFT JOIN "ToDoItems" AS "t0" ON "t"."Id" = "t0"."ProjectId"
ORDER BY "t"."Id"
2024-02-21 14:46:13.767 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (Size = 12), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Projects" SET "Name" = @p0, "Priority" = @p1
WHERE "Id" = @p2
RETURNING 1;
2024-02-21 14:46:13.770 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ToDoItems" SET "IsDone" = @p0
WHERE "Id" = @p1
RETURNING 1;
2024-02-21 14:46:17.926 +05:00 [INF] Executed endpoint 'HTTP: POST /Projects/{ProjectId:int}/ToDoItems/{ToDoItemId:int}'
2024-02-21 14:46:17.930 +05:00 [ERR] An unhandled exception has occurred while executing the request.
System.Net.Mail.SmtpException: Failure sending mail.
 ---> System.Net.Sockets.SocketException (10061): No connection could be made because the target machine actively refused it.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Threading.Tasks.ValueTask.ValueTaskSourceAsTask.<>c.<.cctor>b__4_0(Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.TaskToAsyncResult.End(IAsyncResult asyncResult)
   at System.Net.Sockets.TcpClient.EndConnect(IAsyncResult asyncResult)
   at System.Net.Mail.SmtpConnection.ConnectAndHandshakeAsyncResult.InitializeConnectionCallback(IAsyncResult result)
--- End of stack trace from previous location ---
   at System.Net.Mail.SmtpClient.ConnectCallback(IAsyncResult result)
   --- End of inner exception stack trace ---
   at Contour.CleanArchitecture.Infrastructure.Email.SmtpEmailSender.SendEmailAsync(String to, String from, String subject, String body) in D:\clean-arch\Contour.CleanArchitecture\src\Contour.CleanArchitecture.Infrastructure\Email\SmtpEmailSender.cs:line 19
   at MediatR.NotificationPublishers.ForeachAwaitPublisher.Publish(IEnumerable`1 handlerExecutors, INotification notification, CancellationToken cancellationToken)
   at Ardalis.SharedKernel.MediatRDomainEventDispatcher.DispatchAndClearEvents(IEnumerable`1 entitiesWithEvents)
   at Contour.CleanArchitecture.Infrastructure.Data.AppDbContext.SaveChangesAsync(CancellationToken cancellationToken) in D:\clean-arch\Contour.CleanArchitecture\src\Contour.CleanArchitecture.Infrastructure\Data\AppDbContext.cs:line 33
   at Ardalis.Specification.EntityFrameworkCore.RepositoryBase`1.SaveChangesAsync(CancellationToken cancellationToken)
   at Ardalis.Specification.EntityFrameworkCore.RepositoryBase`1.UpdateAsync(T entity, CancellationToken cancellationToken)
   at Contour.CleanArchitecture.UseCases.Projects.MarkToDoItemComplete.MarkToDoItemCompleteHandler.Handle(MarkToDoItemCompleteCommand request, CancellationToken cancellationToken) in D:\clean-arch\Contour.CleanArchitecture\src\Contour.CleanArchitecture.UseCases\Projects\MarkToDoItemComplete\MarkToDoItemCompleteHandler.cs:line 20
   at Ardalis.SharedKernel.LoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at Contour.CleanArchitecture.Web.Projects.MarkItemComplete.HandleAsync(MarkItemCompleteRequest request, CancellationToken ct) in D:\clean-arch\Contour.CleanArchitecture\src\Contour.CleanArchitecture.Web\Projects\MarkItemComplete.cs:line 29
   at FastEndpoints.Endpoint`2.ExecAsync(CancellationToken ct)
   at FastEndpoints.Endpoint`2.ExecAsync(CancellationToken ct)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at NSwag.AspNetCore.Middlewares.SwaggerUiIndexMiddleware.Invoke(HttpContext context)
   at NSwag.AspNetCore.Middlewares.RedirectToIndexMiddleware.Invoke(HttpContext context)
   at NSwag.AspNetCore.Middlewares.OpenApiDocumentMiddleware.Invoke(HttpContext context)
   at Ardalis.ListStartupServices.ShowAllServicesMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-02-21 14:46:17.955 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:57679/Projects/1/ToDoItems/2 - 500 null text/plain; charset=utf-8 4224.5324ms
2024-02-21 14:46:36.661 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:57679/Projects - null null
2024-02-21 14:46:36.666 +05:00 [INF] Executing endpoint 'HTTP: GET /Projects'
2024-02-21 14:46:36.668 +05:00 [INF] Handling ListProjectsShallowQuery
2024-02-21 14:46:36.670 +05:00 [INF] Property Skip : null
2024-02-21 14:46:36.671 +05:00 [INF] Property Take : null
2024-02-21 14:46:36.672 +05:00 [INF] Handled ListProjectsShallowQuery with Ardalis.Result.Result`1[System.Collections.Generic.IEnumerable`1[Contour.CleanArchitecture.UseCases.Projects.ProjectDTO]] in 0 ms
2024-02-21 14:46:36.674 +05:00 [INF] Executed endpoint 'HTTP: GET /Projects'
2024-02-21 14:46:36.675 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:57679/Projects - 200 null application/json 13.6295ms
2024-02-21 14:46:40.323 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:57679/Projects/1 - null null
2024-02-21 14:46:40.325 +05:00 [INF] Executing endpoint 'HTTP: GET /Projects/{ProjectId:int}'
2024-02-21 14:46:40.327 +05:00 [INF] Handling GetProjectWithAllItemsQuery
2024-02-21 14:46:40.328 +05:00 [INF] Property ProjectId : 1
2024-02-21 14:46:40.330 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__projectId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Name", "t"."Priority", "t0"."Id", "t0"."ContributorId", "t0"."Description", "t0"."IsDone", "t0"."ProjectId", "t0"."Title"
FROM (
    SELECT "p"."Id", "p"."Name", "p"."Priority"
    FROM "Projects" AS "p"
    WHERE "p"."Id" = @__projectId_0
    LIMIT 1
) AS "t"
LEFT JOIN "ToDoItems" AS "t0" ON "t"."Id" = "t0"."ProjectId"
ORDER BY "t"."Id"
2024-02-21 14:46:40.332 +05:00 [INF] Handled GetProjectWithAllItemsQuery with Ardalis.Result.Result`1[Contour.CleanArchitecture.UseCases.Projects.ProjectWithAllItemsDTO] in 3 ms
2024-02-21 14:46:40.333 +05:00 [INF] Executed endpoint 'HTTP: GET /Projects/{ProjectId:int}'
2024-02-21 14:46:40.334 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:57679/Projects/1 - 200 null application/json 10.308ms
2024-02-21 14:47:57.032 +05:00 [INF] Application is shutting down...
